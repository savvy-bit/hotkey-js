(function(root,factory){var hotkeys=factory(root);if(typeof define==="function"&&define.amd){define("hotkeys",function(){return hotkeys})}else if(typeof exports==="object"){module.exports=hotkeys}else{var previousKey=root.hotkeys;hotkeys.noConflict=function(){var k=root.hotkeys;root.hotkeys=previousKey;return k};root.hotkeys=hotkeys}})(this,function(root,undefined){var _api,_keyMap={backspace:8,tab:9,clear:12,enter:13,"return":13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,"delete":46,home:36,end:35,pageup:33,pagedown:34,",":188,".":190,"/":191,"`":192,"-":189,"=":187,";":186,"'":222,"[":219,"]":221,"\\":220},_scope="all",_modifier={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,command:91},modifierMap={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey"},_mods={16:false,18:false,17:false,91:false},code=function(x){return _keyMap[x]||x.toUpperCase().charCodeAt(0)},_handlers={};for(k=1;k<20;k++){_keyMap["f"+k]=111+k}function setScope(scope){_scope=scope||"all"}function getScope(){return _scope||"all"}function addEvent(object,event,method){if(object.addEventListener){object.addEventListener(event,method,false)}else if(object.attachEvent){object.attachEvent("on"+event,function(){method(window.event)})}}function dispatch(event){var key=event.keyCode,modifiersMatch,scope,handler;if(key===93||key===224)key=91;if(key in _mods){_mods[key]=true;for(var k in _modifier)if(_modifier[k]===key)hotkeys[k]=true;return}for(var e in _mods)_mods[e]=event[modifierMap[e]];if(!(key in _handlers))return;scope=getScope();for(i=0;i<_handlers[key].length;i++){handler=_handlers[key][i];if(handler.scope===scope||handler.scope==="all"){modifiersMatch=handler.mods.length>0;for(var y in _mods){if(!_mods[y]&&handler.mods.indexOf(+y)>-1||_mods[y]&&handler.mods.indexOf(+y)===-1)modifiersMatch=false}if(handler.mods.length===0&&!_mods[16]&&!_mods[18]&&!_mods[17]&&!_mods[91]||modifiersMatch){if(handler.method(event,handler)===false){if(event.preventDefault)event.preventDefault();else event.returnValue=false;if(event.stopPropagation)event.stopPropagation();if(event.cancelBubble)event.cancelBubble=true}}}}}addEvent(document,"keydown",function(event){dispatch(event)});function getMods(key){var mods=key.slice(0,key.length-1);for(var i=0;i<mods.length;i++)mods[i]=_modifier[mods[i]];return mods}function getKeys(key){var keys;key=key.replace(/\s/g,"");keys=key.split(",");if(keys[keys.length-1]==="")keys[keys.length-2]+=",";return keys}function hotkeys(key,scope,method){var keys=getKeys(key),mods=[],i=0;if(method===undefined){method=scope;scope="all"}for(;i<keys.length;i++){key=keys[i].split("+");mods=[];if(key.length>1){mods=getMods(key);key=[key[key.length-1]]}key=key[0];key=code(key);if(!(key in _handlers))_handlers[key]=[];_handlers[key].push({shortcut:keys[i],scope:scope,method:method,key:keys[i],mods:mods})}}_api={setScope:setScope,getScope:getScope};for(var a in _api)hotkeys[a]=_api[a];return hotkeys});